# MLB Analytics Project – Lahman Database (1871–2024)

## Overview

This project uses the **Lahman Baseball Database (1871–2024)** to explore long-term patterns in MLB player development, team spending, player career trajectories, and physical profiles.  
The aim is to demonstrate clean, well-structured SQL analytical workflows using joins, CTEs, window functions, materialised logic through views, and optional Python EDA.

The analysis is structured into four major themes:

- **Part I — School / Talent Pipeline Analysis**  
  Which colleges produce the most MLB players, and how have these pipelines shifted over decades?

- **Part II — Salary & Payroll Dynamics**  
  How do teams differ in annual payroll spending, and when do franchises surpass major cumulative salary milestones?

- **Part III — Player Career Analysis**  
  How long do MLB careers last? At what ages do players debut and retire? How loyal are players to their first professional team?

- **Part IV — Player Comparison & Physical Profiles**  
  How do player attributes (handedness, height, weight) vary across teams, eras, and positions?

The project emphasizes transparent, modular SQL pipelines backed by reusable views, clean schema design, and well-defined business questions.  
It includes both core analytical tasks and deeper portfolio-level questions leveraging the breadth of the Lahman database.

---

## Data Source

- **Dataset:** Lahman Baseball Database  
- **Version:** 2024 update (1871–2024 seasons)  
- **Website:** https://sabr.org/lahman-database/  
- **Contents:** Historical MLB player, team, salary, school, park, and postseason data.

### How This Project Uses the Data

Unlike many implementations that ingest Lahman's raw CSVs directly into autogenerated tables, this project uses a **custom SQL schema** defined in:

```
sql/schema.sql
```

This file manually defines **all 11 base Lahman tables**, with:

- Clear and explicit primary keys  
- Consistent data types  
- Better handling of nullable fields  
- Text fields widened where necessary  
- A surrogate key for `collegeplaying`  
- Indexes to enforce logical uniqueness  

This ensures reproducibility, cleaner joins, and avoids type inconsistencies that occur with auto-generated schemas.

After executing `schema.sql`, the CSVs inside `data/core/` are imported into these tables.

All analytical transformations (career summaries, salary aggregates, debut profiles, etc.) are then implemented as SQL views in the optional schema:

```sql
CREATE SCHEMA IF NOT EXISTS mlb_analytics;
```

---

## Project Structure

- **`sql/schema.sql`** — Creates all 11 Lahman base tables  
- **`sql/views.sql`** — Reusable analytical views  
- **`sql/analysis_queries.sql`** — Core questions  
- **`sql/advanced_queries.sql`** — Extended/portfolio questions  
- **`sql/optimised_queries.sql`** — Performance‑tuned queries  
- **`notebooks/exploration.ipynb`** — Optional Python EDA and visualisation  
- **`docs/`** — Schema design, business questions, project overview  

---

## Analytical Themes

### **Part I — School / Talent Pipelines**
Identifies the most prolific colleges, examines geographic patterns, and tracks decade-to-decade changes in player production.

### **Part II — Salary & Payroll Dynamics**
Analyses team payroll totals, spending inequality, and cumulative salary thresholds.  
Explores relationships between spending and postseason performance.

### **Part III — Player Career Trajectories**
Calculates debut and retirement ages, career lengths, team loyalty, and patterns in player progression.

### **Part IV — Physical Profiles & Player Comparisons**
Studies player height, weight, and handedness distributions across eras;  
and examines team-level handedness compositions and debut‑era physical trends.

---

## Tools and Techniques

This project demonstrates:

- Multi-table relational joins  
- Chained CTE pipelines  
- Window functions (RANK, percentiles, moving totals, lag/lead)  
- Carefully designed analytical views  
- SQL + Python integration (pandas, matplotlib)  
- Query performance optimisation  
- Schema‑driven reproducibility  

These reflect modern analytics workflows: **SQL for computation, Python for communication.**

---

## Key Findings (Placeholder)

This section will be populated after running the full analysis.  
Expected highlights include:

- Colleges with the strongest MLB talent pipelines  
- Long‑term payroll stratification across MLB  
- Typical debut/retirement ages and career length distribution  
- Hall of Fame vs non‑Hall career differences  
- Decade‑level changes in player physique  
- Team‑level handedness patterns  

---

## Purpose

This project serves as:

1. **A portfolio‑grade demonstration of SQL mastery**, featuring modelling, querying, schema design, and performance tuning.  
2. **A real analytical investigation** of 150+ years of MLB history across careers, salaries, schools, and physical traits.

It models best‑practice structure: custom schema → data import → analytical views → modular queries → optional EDA.
